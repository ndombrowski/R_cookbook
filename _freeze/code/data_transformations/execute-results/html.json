{
  "hash": "f3565b83419137c5051d77a1930ead1c",
  "result": {
    "markdown": "---\nexecute:\n    eval: true\n\ndf-print: paged\n---\n\n\n# Data transformations\n\n\n::: {.cell}\n\n:::\n\n\n\n## Dealing with NAs in our data\n\n### Removing NAs\n\nNAs are generated when our data contains a missing value. This can become problematic for certain computations and we can decide to remove all NAs.\n\nThe function to do this is ``is.na``. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#create a vector that includes an NA\ny <- c(1,2,3,NA,5)\n\n#check whether we have NAs\nis.na(y)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] FALSE FALSE FALSE  TRUE FALSE\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#remove NAs from our data\ny[!is.na(y)]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1 2 3 5\n```\n:::\n:::\n\n\n- `!=` is \"not equal to.\"\n- The function `is.na(z)` gives a logical vector of the same size as z with value TRUE if and only if the corresponding element in z is NA.\n- I.e. in this example we have FALSE FALSE FALSE  TRUE FALSE\n- When using `y[!is.na(y)]`, we retain the columns were `is.na` is False\n\n\n#### Replacing NAs with something else\n\nAnother option might be to replace a NA with a 0 (or whatever else makes sense in a given context)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#create a vector that includes an NA\nx <- c(1,2,3,NA,5)\n\n#check whether we have NAs\nis.na(x)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] FALSE FALSE FALSE  TRUE FALSE\n```\n:::\n\n```{.r .cell-code}\n#remove NAs from our data\nx[is.na(x)] <- 0\n\n#check data\nx\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1 2 3 0 5\n```\n:::\n:::\n\n\nNotice, that here we use a similar syntax compared to before. Now we do\n\n- Find the NAs (I.e. in this example we have FALSE FALSE FALSE  TRUE FALSE)\n- If NA is TRUE then replace it with a 0\n\n### Replacing NAs in our dataframe\n\nRemember, in the beginning we said that their are NAs in our timecourse data. Let's have a look at this data and find the rows that contain no values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#check in which rows we have NAs inside the root length measurements\nwhich(is.na(timecourse$Rootlength)) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  [1]  29  30 233 234 235 236 237 238 239 240 268 269 270 330 360 374 375 376\n [19] 377 378 379 380 381 382 383 384 385 386 387 388 389 390 402 403 404 405\n [37] 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 444 445 446\n [55] 447 448 449 450 475 476 477 478 479 480 492 493 494 495 496 497 498 499\n [73] 500 515 516 517 518 519 520 533 534 535 536 537 538 539 540 550 551 552\n [91] 553 554 555 556 557 558 559 560 574 575 605\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#check a row with a NA value\ntimecourse[29,]\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"SampleID\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Nutrient\"],\"name\":[2],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Condition\"],\"name\":[3],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Timepoint\"],\"name\":[4],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Rootlength\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"P_MgCl_t0\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"t0\",\"5\":\"NA\",\"_rn_\":\"29\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#remove rows that contain NAs\ntimecourse_noNA <- timecourse[!is.na(timecourse$Rootlength), ]\n\n#check if that worked\nwhich(is.na(timecourse_noNA$Rootlength)) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\ninteger(0)\n```\n:::\n:::\n\n\n## Subsetting our data\n\nWe already have seen important ways to subset data:\n\n1. Use of the index by using the square brackets\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#subsetting rows and columns using the index\ngrowth_data[1:3,2:4]\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"Nutrient\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Condition\"],\"name\":[2],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"FW_shoot_mg\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"noP\",\"2\":\"MgCl\",\"3\":\"10.26\",\"_rn_\":\"1\"},{\"1\":\"noP\",\"2\":\"MgCl\",\"3\":\"6.52\",\"_rn_\":\"2\"},{\"1\":\"noP\",\"2\":\"MgCl\",\"3\":\"12.17\",\"_rn_\":\"3\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n2. Use of operators\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#subset using operators (only print rows if the Nutrient column equals P)\nP_data <- growth_data[growth_data$Nutrient == \"P\", ]\nhead(P_data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"SampleID\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Nutrient\"],\"name\":[2],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Condition\"],\"name\":[3],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"FW_shoot_mg\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Rootlength\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"P\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"32.42\",\"5\":\"11.286793\",\"_rn_\":\"53\"},{\"1\":\"P\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"21.03\",\"5\":\"10.456630\",\"_rn_\":\"54\"},{\"1\":\"P\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"18.35\",\"5\":\"11.106341\",\"_rn_\":\"55\"},{\"1\":\"P\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"21.04\",\"5\":\"10.816896\",\"_rn_\":\"56\"},{\"1\":\"P\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"16.61\",\"5\":\"10.608252\",\"_rn_\":\"57\"},{\"1\":\"P\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"25.79\",\"5\":\"7.121587\",\"_rn_\":\"58\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nNow we want to look at some other examples:\n\n### grep and grepl\n\nOftentimes you may need to filter a data set based on a partial character string that is beyond the scope of comparison operators.\n\nR provides such functions (grep and grepl) that match character patterns in specified vector.  While both of these functions find patterns, they return different output types based on those patterns.  \n\n- grep returns numeric values that correspond to the indexed locations of the patterns\n- grepl returns a logical vector in which 'TRUE' represents a pattern match.\n\nIn our growth data, we only want to print measurements of our controls (i.e. MgCL treatments).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#find the row index values with MgCL treatments using grep\ngrep(\"MgCl\", growth_data$Condition)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 53 54 55 56 57 58 59 60 61 62 63 64\n[26] 65 66 67\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#use grepl to search for MgCL treatments, returning FALSE/TRUE statements for each row of our dataframe\n#with \"TRUE\" representing matched patterns\ngrepl(\"Strain\", growth_data$Condition)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [13] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n```\n:::\n:::\n\n\nNow lets use this to actually filter our data table for a pattern.\n\n#### Filter usign grep\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#use grep\nfilter_for_value <-timecourse_noNA[grep(\"MgCl\", timecourse_noNA$Condition),]\n\n#check the first rows of our data\nhead(filter_for_value)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"SampleID\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Nutrient\"],\"name\":[2],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Condition\"],\"name\":[3],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Timepoint\"],\"name\":[4],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Rootlength\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"P_MgCl_t0\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"t0\",\"5\":\"1.542\",\"_rn_\":\"1\"},{\"1\":\"P_MgCl_t0\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"t0\",\"5\":\"1.849\",\"_rn_\":\"2\"},{\"1\":\"P_MgCl_t0\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"t0\",\"5\":\"1.209\",\"_rn_\":\"3\"},{\"1\":\"P_MgCl_t0\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"t0\",\"5\":\"1.834\",\"_rn_\":\"4\"},{\"1\":\"P_MgCl_t0\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"t0\",\"5\":\"1.586\",\"_rn_\":\"5\"},{\"1\":\"P_MgCl_t0\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"t0\",\"5\":\"1.683\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n#check the dimensions of the original dataframe\ndim(timecourse_noNA)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 526   5\n```\n:::\n\n```{.r .cell-code}\n#check the dimensions of our new dataframe\ndim(filter_for_value)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 235   5\n```\n:::\n:::\n\n\n\n#### Filter usign grepl\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfilter_for_value <-timecourse_noNA[grepl(\"MgC\", timecourse_noNA$Condition),]\n\n#check the first rows of our data\nhead(filter_for_value)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"SampleID\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Nutrient\"],\"name\":[2],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Condition\"],\"name\":[3],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Timepoint\"],\"name\":[4],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Rootlength\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"P_MgCl_t0\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"t0\",\"5\":\"1.542\",\"_rn_\":\"1\"},{\"1\":\"P_MgCl_t0\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"t0\",\"5\":\"1.849\",\"_rn_\":\"2\"},{\"1\":\"P_MgCl_t0\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"t0\",\"5\":\"1.209\",\"_rn_\":\"3\"},{\"1\":\"P_MgCl_t0\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"t0\",\"5\":\"1.834\",\"_rn_\":\"4\"},{\"1\":\"P_MgCl_t0\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"t0\",\"5\":\"1.586\",\"_rn_\":\"5\"},{\"1\":\"P_MgCl_t0\",\"2\":\"P\",\"3\":\"MgCl\",\"4\":\"t0\",\"5\":\"1.683\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n#check the dimensions of the original dataframe\ndim(timecourse_noNA)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 526   5\n```\n:::\n\n```{.r .cell-code}\n#check the dimensions of our new dataframe\ndim(filter_for_value)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 235   5\n```\n:::\n:::\n\n### Discard matching columns\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#filter data set based on values that do not match the specified pattern (by using the ! symbol)\nfilter_for_not_a_value <- timecourse_noNA[!grepl(\"MgCl\", timecourse_noNA$Condition),]\n\n#view dataframe\nhead(filter_for_not_a_value)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"SampleID\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Nutrient\"],\"name\":[2],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Condition\"],\"name\":[3],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Timepoint\"],\"name\":[4],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Rootlength\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"P_350_t0\",\"2\":\"P\",\"3\":\"350\",\"4\":\"t0\",\"5\":\"1.124\",\"_rn_\":\"61\"},{\"1\":\"P_350_t0\",\"2\":\"P\",\"3\":\"350\",\"4\":\"t0\",\"5\":\"1.606\",\"_rn_\":\"62\"},{\"1\":\"P_350_t0\",\"2\":\"P\",\"3\":\"350\",\"4\":\"t0\",\"5\":\"1.519\",\"_rn_\":\"63\"},{\"1\":\"P_350_t0\",\"2\":\"P\",\"3\":\"350\",\"4\":\"t0\",\"5\":\"1.253\",\"_rn_\":\"64\"},{\"1\":\"P_350_t0\",\"2\":\"P\",\"3\":\"350\",\"4\":\"t0\",\"5\":\"1.190\",\"_rn_\":\"65\"},{\"1\":\"P_350_t0\",\"2\":\"P\",\"3\":\"350\",\"4\":\"t0\",\"5\":\"2.053\",\"_rn_\":\"66\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n#check the dimensions of the original dataframe\ndim(timecourse_noNA)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 526   5\n```\n:::\n\n```{.r .cell-code}\n#check the dimensions of our new dataframe\ndim(filter_for_not_a_value)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 291   5\n```\n:::\n:::\n\n\nOther comments:\n\n- Using regular expressions (programming symbol pattern) will increase their functionality\n- Specified patterns are case sensitive ('t' does not equal 'T')\n- Any matching pattern will be returned despite the context in which that pattern is located (i.e., grep('the', data) with return matches for 'the', 'theme', 'heather', 'breathe', and so on. This is where regular expressions are useful for specifying where in a string the pattern should appear.\n\n\n\n### Using regular expressions\n\nA regular expression (regex or regexp for short) is a special text string for describing a search pattern. You can think of regular expressions as wildcards on steroids. You are probably familiar with wildcard notations such as *.txt to find all text files in a file manager. \n\nRegular expressions are explained in the AWK and General notebook. But just to give an example lets just grep Strains that have a 3 letter number\n\nIf you want to know more, see this [cheat sheet here](https://www3.ntu.edu.sg/home/ehchua/programming/howto/Regexe.html)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfilter_3letters <- growth_data[grepl(\"[0-9]{3}\", growth_data$Condition),]\n\n#check the structure of our data\nhead(filter_3letters)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"SampleID\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Nutrient\"],\"name\":[2],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Condition\"],\"name\":[3],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"FW_shoot_mg\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Rootlength\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"noP_101\",\"2\":\"noP\",\"3\":\"Strain101\",\"4\":\"10.49\",\"5\":\"7.143667\",\"_rn_\":\"14\"},{\"1\":\"noP_101\",\"2\":\"noP\",\"3\":\"Strain101\",\"4\":\"8.91\",\"5\":\"7.669841\",\"_rn_\":\"15\"},{\"1\":\"noP_101\",\"2\":\"noP\",\"3\":\"Strain101\",\"4\":\"9.32\",\"5\":\"7.807710\",\"_rn_\":\"16\"},{\"1\":\"noP_101\",\"2\":\"noP\",\"3\":\"Strain101\",\"4\":\"6.76\",\"5\":\"7.508370\",\"_rn_\":\"17\"},{\"1\":\"noP_101\",\"2\":\"noP\",\"3\":\"Strain101\",\"4\":\"5.99\",\"5\":\"6.607630\",\"_rn_\":\"18\"},{\"1\":\"noP_101\",\"2\":\"noP\",\"3\":\"Strain101\",\"4\":\"8.26\",\"5\":\"7.269267\",\"_rn_\":\"19\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n#check the dimensions of the original dataframe\ndim(timecourse_noNA)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 526   5\n```\n:::\n\n```{.r .cell-code}\n#check the dimensions of our new dataframe\ndim(filter_3letters)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 49  5\n```\n:::\n:::\n\n\nHere, ``[0-9]`` searches for every number from 0-9 and we look for three numbers.  \n\n### Levels and subsetting\n\nOne important thing with subsetting is that the levels are still kept. So with the command above we remove every row that is not Strain101 and Strain230. However, the levels are still kept. Let's check this:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlevels(filter_3letters$Condition)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"MgCl\"      \"Strain101\" \"Strain230\" \"Strain28\" \n```\n:::\n:::\n\n\nSo we see that MgCl and Strain28 are still in the levels even if they do not occur in our table itself. Sometimes when working with subsetted dataframes, i.e. when doing stats or plotting, this can interfere with our analysis. Here, it is useful to drop empty levels.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfilter_3letters_clean <- droplevels(filter_3letters)\nlevels(filter_3letters_clean$Condition)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Strain101\" \"Strain230\"\n```\n:::\n:::\n\n\n\n## Add new columns to our data and combining values in different columns\n\nWe can also add new columns into original table, i.e. if we want to not show the fresh weight in mg but in g.\n\nBelow you can see that if we have numerical data in a column, we can use normal math operators (like +,-,/)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#convert mg to g\ngrowth_data$FW_shoot_g <- growth_data$FW_shoot_mg/10\nhead(growth_data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"SampleID\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Nutrient\"],\"name\":[2],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Condition\"],\"name\":[3],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"FW_shoot_mg\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Rootlength\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"FW_shoot_g\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"10.26\",\"5\":\"5.931015\",\"6\":\"1.026\",\"_rn_\":\"1\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"6.52\",\"5\":\"5.743447\",\"6\":\"0.652\",\"_rn_\":\"2\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"12.17\",\"5\":\"6.834720\",\"6\":\"1.217\",\"_rn_\":\"3\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"11.37\",\"5\":\"6.742735\",\"6\":\"1.137\",\"_rn_\":\"4\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"9.80\",\"5\":\"6.736886\",\"6\":\"0.980\",\"_rn_\":\"5\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"3.75\",\"5\":\"4.236348\",\"6\":\"0.375\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#we can also round our data\ngrowth_data$FW_shoot_g <- round(growth_data$FW_shoot_mg/10, digits = 2)\nhead(growth_data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"SampleID\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Nutrient\"],\"name\":[2],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Condition\"],\"name\":[3],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"FW_shoot_mg\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Rootlength\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"FW_shoot_g\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"10.26\",\"5\":\"5.931015\",\"6\":\"1.03\",\"_rn_\":\"1\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"6.52\",\"5\":\"5.743447\",\"6\":\"0.65\",\"_rn_\":\"2\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"12.17\",\"5\":\"6.834720\",\"6\":\"1.22\",\"_rn_\":\"3\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"11.37\",\"5\":\"6.742735\",\"6\":\"1.14\",\"_rn_\":\"4\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"9.80\",\"5\":\"6.736886\",\"6\":\"0.98\",\"_rn_\":\"5\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"3.75\",\"5\":\"4.236348\",\"6\":\"0.38\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nWe can also add (or substract, etc ...) values from different columns. I.e. here we could calculate the ratios.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#we can also do math with the values in two columns, i.e. if we want to calculate the ration between root length and fresh weight\ngrowth_data$ratio <- growth_data$Rootlength/growth_data$FW_shoot_mg\nhead(growth_data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"SampleID\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Nutrient\"],\"name\":[2],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Condition\"],\"name\":[3],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"FW_shoot_mg\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Rootlength\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"FW_shoot_g\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"ratio\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"10.26\",\"5\":\"5.931015\",\"6\":\"1.03\",\"7\":\"0.5780717\",\"_rn_\":\"1\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"6.52\",\"5\":\"5.743447\",\"6\":\"0.65\",\"7\":\"0.8808968\",\"_rn_\":\"2\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"12.17\",\"5\":\"6.834720\",\"6\":\"1.22\",\"7\":\"0.5616039\",\"_rn_\":\"3\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"11.37\",\"5\":\"6.742735\",\"6\":\"1.14\",\"7\":\"0.5930286\",\"_rn_\":\"4\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"9.80\",\"5\":\"6.736886\",\"6\":\"0.98\",\"7\":\"0.6874374\",\"_rn_\":\"5\"},{\"1\":\"noP\",\"2\":\"noP\",\"3\":\"MgCl\",\"4\":\"3.75\",\"5\":\"4.236348\",\"6\":\"0.38\",\"7\":\"1.1296929\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}